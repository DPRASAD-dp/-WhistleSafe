# ğŸ“˜ WhistleSafe â€” Anonymous AI-Powered Crime Reporting System

WhistleSafe is a dual-dashboard **Streamlit application** that enables citizens to anonymously report crimes and allows authorities to verify those reports using:

âœ… AI-powered text analysis (Gemini)  
âœ… Deepfake detection for uploaded videos  
âœ… Auto-translation using **Lingo.dev**  
âœ… Multi-language UI (English, Hindi, Telugu, Tamil, Spanish, French)  
âœ… Auto-generated downloadable DOCX reports  

This project solves the major problems of **fake video submissions, miscommunication, and language barriers** in public crime reporting.

---

## ğŸš€ Features Overview

---

## ğŸ§‘â€ğŸ’» 1. Anonymous User Reporting Dashboard (`user_input.py`)

Users can:

- Create an anonymous account  
- Upload a crime-related video  
- Submit a text description  
- Auto-translation to English for uniform analysis  
- Track the status of past reports  
- Login / Logout securely  

All reports are stored in **SQLite database** and visible to authorities.

---

## ğŸ›‚ 2. Authority Verification Dashboard (`submission_verification.py`)

Authorities can:

- ğŸ” View all reports  
- ğŸ¥ Review uploaded video  
- ğŸ“ Read crime description (translated to UI language)  
- ğŸ§  See AI interpretation  
- ğŸŸ¢ Accept / ğŸ”´ Reject the report  
- ğŸ“„ Download autogenerated DOCX report  

Each report contains:

- User ID  
- Uploaded video  
- Text description (auto-translated)  
- AI deepfake results  
- Gemini crime understanding  
- Final status  

---

## ğŸ¥ Deepfake Detection (Video Analysis)

A custom deepfake detection pipeline performs:

- Facial movement consistency checks  
- Frequency domain (FFT) analysis  
- Audioâ€“visual synchronization  
- Generates:

```json
{
  "final_score": 0.81,
  "component_scores": {
    "facial": 0.79,
    "frequency": 0.84,
    "audio_visual": 0.80
  },
  "interpretation": {
    "verdict": "Real",
    "confidence": 0.62,
    "anomalies": []
  }
}
```

Deepfake analysis **always remains in English** for accuracy.

---

## ğŸ§  AI Text Crime Analysis â€” Gemini (`gemini_processing.py`)

Gemini extracts structured crime information:

- Time of crime  
- Place of crime  
- Crime summary  

Using a strict enforced structure:

```
Time of Crime: ...
Place of Crime: ...
Crime Details: ...
```

Output is stored in **English â†’ translated** to the authorityâ€™s selected UI language.

---

## ğŸ“„ Auto-Generated DOCX Reports

When the authority Accepts / Rejects:

- A `.docx` report is created  
- Contains:
  - Translated crime description (UI language)
  - Translated Gemini output  
  - Translated status  
  - Deepfake analysis (English only)
- A **download button** appears on the dashboard  

---

## ğŸŒ Multi-Language Support (via Lingo.dev)

### âœ” What gets translated?

- All Streamlit UI text  
- User text inputs  
- Gemini outputs  
- Status labels  
- DOCX report (except deepfake section)

### â— Not translated:

- Deepfake analysis output (English only)

### Example

```python
from lingo_translation import translate

translated_text = translate("Hello world", "hi")
```

Supported Languages:

```python
LANGUAGES = {
    "English": "en",
    "à¤¹à¤¿à¤¨à¥à¤¦à¥€": "hi",
    "à°¤à±†à°²à±à°—à±": "te",
    "à®¤à®®à®¿à®´à¯": "ta",
    "EspaÃ±ol": "es",
    "FranÃ§ais": "fr"
}
```

---

## ğŸ§  Architecture Workflow

### **Citizen Workflow**
```
User
   â†’ Upload Video + Text
       â†’ Lingo.dev auto-translation â†’ English
           â†’ Store in DB
```

### **Authority Workflow**
```
View Report
   â†’ Video â†’ Deepfake Detector â†’ Score
   â†’ Text â†’ Gemini Crime Parser â†’ Extract Details
   â†’ Translate Gemini Output â†’ UI language
   â†’ Accept/Reject â†’ Generate DOCX â†’ Store + Download
```

---

## ğŸ“¦ Installation Guide

### **1. Install Python 3.11**

TensorFlow + OpenCV compatibility reasons.

---

### **2. Install all dependencies**

Windows:

```bash
pip install ^
    numpy==1.26.4 ^
    opencv-python==4.8.1.78 ^
    moviepy ^
    librosa ^
    scipy ^
    python-docx ^
    streamlit ^
    langchain ^
    langchain-core ^
    langchain-google-genai ^
    ibm-watsonx-ai ^
    langchain-ibm
```

Linux/Mac â†’ replace `^` with `\`

---

## **3. Project Folder Structure**

```
WhistleSafe/
â”‚â”€â”€ user_input.py
â”‚â”€â”€ submission_verification.py
â”‚â”€â”€ lingo_translation.py
â”‚â”€â”€ gemini_processing.py
â”‚â”€â”€ dfpipeline.py
â”‚â”€â”€ user_data.db
â”‚â”€â”€ uploads/
â”‚â”€â”€ reports/
```

Auto-created at runtime:

- `uploads/` â†’ User-uploaded videos  
- `reports/` â†’ Generated DOCX files  

---

## â–¶ï¸ How to Run the Project

### Start User Dashboard
```bash
streamlit run user_input.py
```

### Start Authority Dashboard
```bash
streamlit run submission_verification.py
```

---

## ğŸ” Demo Login Credentials

| Username   | Password   |
|------------|------------|
| reporter1  | password1  |
| reporter2  | password2  |
| reporter3  | password3  |
| reporter4  | password4  |

---

## ğŸ”§ Project Components Explained

### **1ï¸âƒ£ Deepfake Detection (`dfpipeline.py`)**

- Haar cascade face detection  
- Facial movement variance  
- FFT-based frequency analysis  
- Audioâ€“visual correlation  
- Generates:
  - Final score  
  - Component scores  
  - Interpretation + anomaly list  

---

### **2ï¸âƒ£ Gemini Crime Parser (`gemini_processing.py`)**

Extracts:

- Time  
- Location  
- Short crime summary  

---

### **3ï¸âƒ£ Real-Time Translation (`lingo_translation.py`)**

Using Lingo.dev:

```python
LingoDotDevEngine.quick_translate(
    text,
    api_key=API_KEY,
    source_locale="auto",
    target_locale=target_lang
)
```

---

## ğŸ›¡ Security Notes

- No real user identity required  
- No geolocation collected  
- Demo passwords stored in plain text (**must hash in production**)  
- Videos stored locally  

---

## ğŸ“ Future Enhancements

- JWT-based authentication  
- Strong password hashing (bcrypt)  
- Real deepfake CNN model (XceptionNet / EfficientNet)  
- Mobile reporting app  
- Automatic crime category classifier  

---

## ğŸ¯ Final Summary

**WhistleSafe** is a multi-language, AI-powered, deepfake-aware crime reporting system combining:

- Lingo.dev translations  
- Gemini LLM  
- Deepfake detection  
- Streamlit UI  
- SQLite storage  

It is designed to be a **trustworthy, accessible, and secure tool** for citizen crime reporting and authority verification.

---
